
# üìä Accounting Bot ORIA  
> Telegram-–±–æ—Ç –¥–ª—è —É—á—ë—Ç–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —á–µ–∫–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ Google Sheets.

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue?logo=python)](https://python.org)
[![aiogram](https://img.shields.io/badge/aiogram-3.21+-teal?logo=telegram)](https://docs.aiogram.dev/)
[![Google Sheets](https://img.shields.io/badge/Google_Sheets-API_v4-green?logo=google-sheets)](https://developers.google.com/sheets)

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–µ–∫–æ–≤:  
  `/add` ‚Äî –ø–æ QR-–∫–æ–¥—É (—á–µ—Ä–µ–∑ [Proverkacheka API](https://proverkacheka.com))  
  `/add_manual` ‚Äî –≤—Ä—É—á–Ω—É—é (—Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π `fiscal_doc`)
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ (`/expenses`) ‚Äî –ø–æ QR –≤—Ç–æ—Ä–æ–≥–æ —á–µ–∫–∞ —Å **–ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞**
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç—ã (`/return`) ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ `fiscal_doc` **–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞**
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–æ—Å—Ç–∞–≤–∫–∞—Ö (—Å–µ–≥–æ–¥–Ω—è / 3 –¥–Ω—è –Ω–∞–∑–∞–¥), –≥–∏–±–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (`/add_user`, `/remove_user`) ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ `logs/bot.log` –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ª–∏—Å—Ç *Receipt Errors*
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É

---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/isakov17/AccountingBotORIA.git
cd AccountingBotORIA
pip install -r requirements.txt
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ Google-—Ç–∞–±–ª–∏—Ü—É —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ª–∏—Å—Ç–∞–º–∏:
   - `Transactions` (A:M):  
     `Date`, `Amount`, `User ID`, `Store`, `Items JSON`, `Status`, `Customer`, `Items Copy`, `Type`, `fiscal_doc`, `QR Input`, `QR Return`, **`Project`**
   - `AllowedUsers` (A:A): Telegram ID –∞–¥–º–∏–Ω–æ–≤
   - `Receipt Errors` (A:D): –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
   - `Summary`: –¥–ª—è –±–∞–ª–∞–Ω—Å–∞

2. –í–∫–ª—é—á–∏—Ç–µ **Google Sheets API** –∏ **Google Drive API**, –ø–æ–ª—É—á–∏—Ç–µ `credentials.json`

3. –ó–∞–∫–æ–¥–∏—Ä—É–π—Ç–µ –µ–≥–æ:  
   ```bash
   base64 credentials.json | tr -d '\n' > credentials.b64
   ```

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` –∏–∑ `.env.example`:
   ```env
   BOT_TOKEN=XXX
   GOOGLE_CREDENTIALS_BASE64=eyJ0eX...  # —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ credentials.b64
   SPREADSHEET_ID=1xYz...
   ADMIN_ID=860613320
   # NOTIFICATION_CHAT_ID=-1001234567890  # ‚Üê —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   ```

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   python main.py
   ```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

| ‚Ññ | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|----------|--------|
| 1 | –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å **—Ä–∞–∑–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏** –≤ —Ç–∞–±–ª–∏—Ü—É –ø–∏—à–µ—Ç—Å—è –¥–∞—Ç–∞ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–≥–æ | üõ† –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ |
| 2 | –í–æ–∑–≤—Ä–∞—Ç—ã: –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ `fiscal_doc`, –Ω–æ –Ω–µ—Ç —Å—Ç—Ä–æ–≥–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –∫ **–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–æ–≤–∞—Ä—É** (–º–æ–∂–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å—Å—è –Ω–µ–≤–µ—Ä–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç) | ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è (—Å–º. –ª–æ–≥–∏) ‚Äî –Ω—É–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å |
| 3 | –ò—Å–∫–ª—é—á—ë–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (¬´–î–æ—Å—Ç–∞–≤–∫–∞¬ª, ¬´–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä¬ª) –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ `Summary`, —Ö–æ—Ç—è –¥–æ–ª–∂–Ω—ã ‚Äî –∫–∞–∫ —Ä–∞—Å—Ö–æ–¥—ã | üõ† –í –ø–ª–∞–Ω–∞—Ö |
| 4 | –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ —á–µ–∫–∞ –±–æ—Ç –ø–∏—à–µ—Ç ¬´–ß–µ–∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç¬ª, –Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç **—Å—É–º–º—É** | üõ† –£–ª—É—á—à–µ–Ω–æ: —Ç–µ–ø–µ—Ä—å –≤ –ª–æ–≥–∞—Ö –∏ –æ—Ç–≤–µ—Ç–µ ‚Äî `sum_value` –∏ `note` |
| 5 | –ù–µ—Ç –ø–æ–ª—è **¬´–ü—Ä–æ–µ–∫—Ç¬ª** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ ‚Üí —Å–ª–æ–∂–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–∞–Ω–∏—è | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–æ–ª–±–µ—Ü `Project` –≤ `Transactions` (M) |

---

## üìå –î–æ—Ä–∞–±–æ—Ç–∫–∏ (planned)

- [ ] üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram-–≥—Ä—É–ø–ø—É (`NOTIFICATION_CHAT_ID`)
- [ ] üì¶ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ —Å—É–º–º—ã –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–æ–≤–∞—Ä—É –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- [ ] üßæ –ü—Ä–∏ –¥—É–±–ª–µ ‚Äî –≤—ã–≤–æ–¥: *¬´–ß–µ–∫ –Ω–∞ 961 ‚ÇΩ (fiscal_doc=199977) —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω¬ª*
- [ ] üñº –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ QR –∏–∑ —Ñ–æ—Ç–æ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Tesseract / –≤–Ω–µ—à–Ω–∏–º OCR API)
- [ ] üìä Dashboard: —Å–≤–æ–¥–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

---

> üí° –ë–æ—Ç –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª–µ –∑–∞–∫—É–ø–æ–∫.  
> –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è [isakov17](https://github.com/isakov17) ‚Äî –∏–Ω–∂–µ–Ω–µ—Ä–æ–º-—Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–º —Å –æ–ø—ã—Ç–æ–º –≤ IoT –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.
```

---

‚úÖ –≠—Ç–æ—Ç `README.md`:
- —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏,
- –æ—Ç—Ä–∞–∂–∞–µ—Ç –∫–∞–∫ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ç–∞–∫ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥,
- –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–µ—Ç –≤–∞—à–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã (QA + IoT + Python),
- –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º (–¥–æ–±–∞–≤–∏—Ç–µ ‚Äî –¥–æ–ø–∏—à–µ—Ç–µ –ø—É–Ω–∫—Ç—ã),
- –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è GitHub.

–•–æ—Ç–∏—Ç–µ ‚Äî –º–æ–≥—É —Å—Ä–∞–∑—É —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å PR –∏–ª–∏ –¥–∞—Ç—å diff –¥–ª—è `git apply`.
